define(["require","exports","util.roberta","message","guiState.model","progHelp.controller","legal.controller","webview.controller","confVisualization","socket.controller","jquery","blockly","thymioSocket.controller","notification.controller","webUsb.controller","program.controller","configuration.controller","user.controller","progList.controller","confList.controller","galleryList.controller","tutorialList.controller","logList.controller","progInfo.controller"],(function(e,o,r,n,a,t,i,s,u,l,g,d,c,b,m,p,v,f,C,h,y,k,P,N){Object.defineProperty(o,"__esModule",{value:!0}),o.setIsWebUsbSelected=o.isWebUsbSelected=o.getLegalTextsMap=o.updateTutorialMenu=o.updateMenuStatus=o.setWebview=o.inWebview=o.getTheme=o.getAvailableHelp=o.getSocket=o.setSocket=o.getPingTime=o.setPingTime=o.doPing=o.setPing=o.isProgramToDownload=o.setProgramToDownload=o.getCommandLine=o.getSignature=o.getVendor=o.getConnection=o.getConnectionTypeEnum=o.getListOfTutorials=o.getWebotsUrl=o.hasWebotsSim=o.hasNN=o.hasMarkerSim=o.hasMultiSim=o.hasSim=o.checkSim=o.setConfiguration=o.setProgram=o.setLogout=o.setLogin=o.getUserUserGroupOwner=o.getUserUserGroup=o.isUserMemberOfUserGroup=o.isUserAccountActivated=o.getUserAccountName=o.getUserName=o.isPublicServerVersion=o.getServerVersion=o.setStartWithoutPopup=o.getStartWithoutPopup=o.getConfigurationConf=o.getProgramProg=o.getConfigurationToolbox=o.getProgramToolbox=o.getRobots=o.getProgramXML=o.setProgramXML=o.getConfigurationXML=o.setConfigurationXML=o.setRobotToken=o.getRobotFWName=o.getConfToolbox=o.getToolbox=o.getProgramToolboxLevel=o.setProgramToolboxLevel=o.setConfigurationNameDefault=o.setConfigurationName=o.getConfigurationName=o.setProgramShareRelation=o.getProgramShareRelation=o.setProgramAuthorName=o.getProgramAuthorName=o.setProgramOwnerName=o.getProgramOwnerName=o.setProgramName=o.getProgramName=o.setProgramTimestamp=o.getProgramTimestamp=o.isUserLoggedIn=o.getBinaryFileExtension=o.getSourceCodeFileExtension=o.getProgramSource=o.setProgramSource=o.getProgramShared=o.setConfigurationSaved=o.isConfigurationSaved=o.setProgramSaved=o.isProgramSaved=o.getLanguage=o.setLanguage=o.getPrevView=o.getView=o.setView=o.hasRobotDefaultFirmware=o.getRobotVersion=o.getRobotState=o.getRobotBattery=o.getRobotName=o.getRobotTime=o.isRobotDisconnected=o.isConfigurationUsed=o.isRobotConnected=o.getRobotInfoEN=o.getRobotInfoDE=o.isRobotBeta=o.getMenuRobotRealName=o.getRobotRealName=o.getRobotPort=o.setRobotPort=o.getRobotGroup=o.getRobot=o.setRunEnabled=o.isRunEnabled=o.setConnectionState=o.findRobot=o.findGroup=o.setKioskMode=o.setRobot=o.setBricklyWorkspace=o.getBricklyWorkspace=o.setBlocklyWorkspace=o.getBlocklyWorkspace=o.setIsAgent=o.getIsAgent=o.setState=o.isKioskMode=o.isConfigurationAnonymous=o.getConfigurationStandardName=o.isConfigurationStandard=o.isProgramWritable=o.isProgramStandard=o.setInitialState=o.init=o.resetDynamicProgramToolbox=o.setDynamicProgramToolbox=o.getRobotDeprecatedData=o.isRobotDeprecated=o.resetRobot=void 0;var T=3e5,w=3e3;function S(){return"NEPOprog"==a.program.name}function R(){return"WRITE"==a.program.shared||"READ"!=a.program.shared}function E(){return a.configuration.name==G().toUpperCase()+"basis"}function W(){return G().toUpperCase()+"basis"}function L(){return""==a.configuration.name}function A(e){e["server.version"]&&(a.server.version=e["server.version"]),e["robot.version"]&&(a.robot.version=e["robot.version"]),me()!==be().TDM&&(null!=e["robot.firmwareName"]?a.robot.fWName=e["robot.firmwareName"]:a.robot.fWName="",null!=e["robot.wait"]?a.robot.time=e["robot.wait"]:a.robot.time=-1,null!=e["robot.battery"]?a.robot.battery=e["robot.battery"]:a.robot.battery="",null!=e["robot.name"]?a.robot.name=e["robot.name"]:a.robot.name="",null!=e["robot.state"]?a.robot.state=e["robot.state"]:a.robot.state=""),null!=e["robot.sensorvalues"]?a.robot.sensorValues=e["robot.sensorvalues"]:a.robot.sensorValues="",null!=e["robot.nepoexitvalue"]&&e["robot.nepoexitvalue"]!==a.robot.nepoExitValue&&(a.nepoExitValue=e["robot.nepoexitvalue"],143!==a.nepoExitValue&&0!==a.robot.nepoExitValue&&n.displayMessage("POPUP_PROGRAM_TERMINATED_UNEXPECTED","POPUP","")),a.user.accountName?(g("#iconDisplayLogin").removeClass("error"),g("#iconDisplayLogin").addClass("ok")):(g("#iconDisplayLogin").removeClass("ok"),g("#iconDisplayLogin").addClass("error"));me();switch(me()){case a.gui.connectionType.AGENTORTOKEN:case a.gui.connectionType.TDM:if(!0===a.gui.isAgent)break;case a.gui.connectionType.TOKEN:g("#menuConnect").parent().removeClass("disabled"),"wait"===a.robot.state?(g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").addClass("wait"),U(!0),g("#runSourceCodeEditor").removeClass("disabled")):"busy"===a.robot.state?(g("#head-navi-icon-robot").removeClass("wait"),g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").addClass("busy"),U(!1),g("#runSourceCodeEditor").addClass("disabled")):(g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").removeClass("wait"),g("#head-navi-icon-robot").addClass("error"),U(!1),g("#runSourceCodeEditor").addClass("disabled"));case a.gui.connectionType.AUTO:case a.gui.connectionType.LOCAL:case a.gui.connectionType.JSPLAY:case a.gui.connectionType.AGENT:case a.gui.connectionType.WEBVIEW:}}function D(e){a.gui.isAgent=e}function O(){return a.gui.blocklyWorkspace}function x(){return a.gui.bricklyWorkspace}function M(e){var o=ne();for(var r in o)if(o[r].name==e&&""!==o[r].group)return e=o[r].group;return e}function U(e){a.gui.runEnabled=e,e?(a.gui.blocklyWorkspace&&a.gui.blocklyWorkspace.robControls.enable("runOnBrick"),a.gui.blocklyWorkspace&&a.gui.blocklyWorkspace.robControls.enable("stopProgram"),g(".menuRunProg, #runSourceCodeEditor").removeClass("disabled")):(a.gui.blocklyWorkspace&&a.gui.blocklyWorkspace.robControls.disable("runOnBrick"),a.gui.blocklyWorkspace&&a.gui.blocklyWorkspace.robControls.disable("stopProgram"),g(".menuRunProg, #runSourceCodeEditor").addClass("disabled"))}function B(){return a.gui.robot}function G(){return a.gui.robotGroup}function V(){return a.robot.robotPort}function I(){for(var e in ne())if(ne().hasOwnProperty(e)&&ne()[e].name==B())return ne()[e].realName;return B()}function F(e){return"deprecated"==ae()[e].announcement}function _(){return a.robot.time>0||(!(a.gui.connection!==a.gui.connectionType.AUTO&&a.gui.connection!==a.gui.connectionType.LOCAL&&!a.gui.connectionType.JSPLAY)||(a.gui.connection===a.gui.connectionType.AGENTORTOKEN||!(a.gui.connection!==a.gui.connectionType.WEBVIEW||!s.isRobotConnected())))}function K(){return a.gui.configurationUsed}function H(){return a.gui.view}function X(){return a.gui.language}function j(e){e?(g("#menuSaveProg").parent().parent().removeClass("disabled"),g("#menuSaveProg").parent().parent().addClass("disabled"),O().robControls.disable("saveProgram")):J()&&!S()&&R()?(g("#menuSaveProg").parent().parent().removeClass("disabled"),O().robControls.enable("saveProgram")):(g("#menuSaveProg").parent().parent().removeClass("disabled"),g("#menuSaveProg").parent().parent().addClass("disabled"),O().robControls.disable("saveProgram")),a.program.saved=e}function z(e){e||!J()||E()||L()?(g("#menuSaveConfig").parent().removeClass("disabled"),g("#menuSaveConfig").parent().addClass("disabled"),x().robControls.disable("saveProgram")):(g("#menuSaveConfig").parent().removeClass("disabled"),x().robControls.enable("saveProgram")),a.configuration.saved=e}function J(){return a.user.id>=0}function $(e){var o=e;if(ee()&&"NONE"!==ee()&&Y()!==te()){var r=Y(),n=Q(),t=ee(),i="",s="",u="";"Gallery"===r?(i="th-large-outline","READ"===t&&(s=n)):"Roberta"===r?i="roberta":"WRITE"==t?(i="pencil",u='<span style="color:#33B8CA;">'+r+"</span>"):"READ"==t&&(i="eye",u='<span style="color:#33B8CA;">'+r+"</span>"),o+=' <b><span style="color:#33B8CA;" class="typcn typcn-'+i+' progName">'+s+"</span></b>"+u}g("#tabProgramName").html(o),a.program.name=e}function Y(){return a.program.owner||te()}function q(e){a.program.owner=e}function Q(){return a.program.author||te()}function Z(e){a.program.author=e}function ee(){return a.program.shared}function oe(e){a.program.shared=e}function re(e){g("#tabConfigurationName").html(e),a.configuration.name=e}function ne(){return a.server.robots}function ae(){return a.server.robotsByName}function te(){return a.user.accountName}function ie(){return""!=a.user.userGroup}function se(){ue()?(ge()?g("#simMarkerObject").parent().css("display","inline-block"):g("#simMarkerObject").parent().css("display","none"),g("#menuRunSim").parent().removeClass("disabled"),g("#simButton, #simDebugButton").show()):(g("#menuRunSim").parent().addClass("disabled"),g("#simButton, #simDebugButton").hide()),de()&&g("#simDebugButton").hide(),le()?(g("#menuRunMulipleSim").parent().removeClass("unavailable"),g("#menuRunMulipleSim").parent().addClass("available"),g("#menuRunMulipleSim").parent().removeClass("disabled")):(g("#menuRunMulipleSim").parent().addClass("unavailable"),g("#menuRunMulipleSim").parent().removeClass("available"),g("#menuRunMulipleSim").parent().addClass("disabled"))}function ue(){return 1==a.gui.sim}function le(){return 1==a.gui.multipleSim}function ge(){return 1==a.gui.markerSim}function de(){return 1==a.gui.webotsSim}function ce(){return a.server.tutorial}function be(){return a.gui.connectionType}function me(){return a.gui.connection}function pe(e){a.server.pingTime=e}function ve(){return a.gui.webview||!1}function fe(e){switch(e){case 0:me()!==a.gui.connectionType.AGENTORTOKEN?(g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").removeClass("wait"),U(!1),g("#runSourceCodeEditor").addClass("disabled"),g("#menuConnect").parent().addClass("disabled"),D(!0)):D(!1);break;case 1:D(!0),g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").addClass("wait"),U(!0),g("#runSourceCodeEditor").removeClass("disabled"),g("#menuConnect").parent().addClass("disabled");break;default:D(!0),g("#menuConnect").parent().removeClass("disabled"),""==V()?(g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").removeClass("wait"),U(!1)):(g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").addClass("wait"),U(!0),g("#runSourceCodeEditor").removeClass("disabled"))}}function Ce(){g("#head-navigation-tutorial").hide();var e=ce();for(var o in e)if(e.hasOwnProperty(o)&&e[o].language===X().toUpperCase()){g("#head-navigation-tutorial").show();break}}o.init=function(e,o){var r=g.Deferred();return g.when(a.init()).then((function(){if(a.gui.webview=o||!1,a.gui.webview&&g(".logo").css({right:"32px"}),a.gui.view="tabProgram",a.gui.prevView="tabProgram",a.gui.language=e,a.gui.startWithoutPopup=!1,a.user.id=-1,a.user.accountName="",a.user.name="",a.robot.name="",a.robot.robotPort="",a.robot.socket=null,a.gui.isAgent=!0,a.gui.isWebUsbSelected=!1,a.program.toolbox.level="beginner",q(null),Z(null),oe(null),$("NEPOprog"),"default"!==a.server.theme){var n="../theme/"+a.server.theme+".json";g.getJSON(n).done((function(e){a.server.theme=e})).fail((function(e,o){console.error('"'+n+'" is not a valid json file! The reason is probably a',o),a.server.theme="default"}))}r.resolve()})),r.promise()},o.setInitialState=function(){g(".level").removeClass("disabled"),g(".level."+a.program.toolbox.level).addClass("disabled"),"tabProgram"===a.gui.view||"start"===a.gui.view?(g("#head-navigation-configuration-edit").css("display","none"),a.gui.blocklyWorkspace.markFocused()):"tabConfiguration"===a.gui.view&&(g("#head-navigation-program-edit").css("display","none"),a.gui.bricklyWorkspace.markFocused()),g("#menu-"+a.gui.robot).parent().addClass("disabled"),Ce()},o.isProgramStandard=S,o.isProgramWritable=R,o.isConfigurationStandard=E,o.getConfigurationStandardName=W,o.isConfigurationAnonymous=L,o.isKioskMode=function(){return a.kiosk&&!0===a.kiosk},o.setState=A,o.getIsAgent=function(){return a.gui.isAgent},o.setIsAgent=D,o.getBlocklyWorkspace=O,o.setBlocklyWorkspace=function(e){a.gui.blocklyWorkspace=e},o.getBricklyWorkspace=x,o.setBricklyWorkspace=function(e){a.gui.bricklyWorkspace=e},o.setRobot=function(e,o,n){var i=M(e);switch(a.gui.program=o.program,a.gui.configuration=o.configuration,a.gui.sim=o.sim,a.gui.multipleSim=o.multipleSim,a.gui.markerSim=o.markerSim,a.gui.nn=o.nn,a.gui.nnActivations=o.nnActivations,a.gui.webotsSim=o.webotsSim,a.gui.webotsUrl=o.webotsUrl,a.gui.neuralNetwork=void 0!==o.neuralNetwork&&o.neuralNetwork,a.gui.connection=o.connection,a.gui.vendor=o.vendor,a.gui.signature=o.signature,a.gui.commandLine=o.commandLine,a.gui.configurationUsed=o.configurationUsed,a.gui.sourceCodeFileExtension=o.sourceCodeFileExtension,a.gui.binaryFileExtension=o.binaryFileExtension,a.gui.hasWlan=o.hasWlan,a.gui.firmwareDefault=o.firmwareDefault,g("#blocklyDiv, #bricklyDiv").css("background","url(../../../../css/img/"+i+"Background.jpg) repeat"),g("#blocklyDiv, #bricklyDiv").css("background-size","100%"),g("#blocklyDiv, #bricklyDiv").css("background-position","initial"),K()?u.CircuitVisualization.isRobotVisualized(i,e)&&(g("#bricklyDiv").css("background",""),g("#bricklyDiv").css("background-position",""),g("#bricklyDiv").css("background-size","")):(g("#bricklyDiv").css("background","url(../../../../css/img/"+i+"BackgroundConf.svg) no-repeat"),g("#bricklyDiv").css("background-position","center"),g("#bricklyDiv").css("background-size","75% auto")),g(".robotType").removeClass("disabled"),g(".robotType."+e).addClass("disabled"),g("#head-navi-icon-robot").removeClass("typcn-open"),g("#head-navi-icon-robot").removeClass("typcn-"+a.gui.robotGroup),g("#head-navi-icon-robot").addClass("typcn-"+i),g(".simWindow").removeClass("simWindow-openedButHidden"),se(),q(null),Z(null),oe(null),n?(re(i.toUpperCase()+"basis"),$("NEPOprog")):(j(!0),z(!0),M(e)!=G()&&(re(i.toUpperCase()+"basis"),$("NEPOprog"))),g("#simRobot").removeClass("typcn-"+a.gui.robotGroup),g("#simRobot").addClass("typcn-"+i),me(),g("#robotConnect").removeClass("disabled"),me()){case a.gui.connectionType.TOKEN:l.listRobotStop(),g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").removeClass("wait"),U(!1),g("#runSourceCodeEditor").addClass("disabled"),g("#menuConnect").parent().removeClass("disabled"),pe(w);break;case a.gui.connectionType.LOCAL:case a.gui.connectionType.AUTO:case a.gui.connectionType.JSPLAY:l.listRobotStop(),m.isConnected()&&m.removeDevice(),m.setIsWebUsbSelected(!1),g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").addClass("wait"),U(!0),g("#runSourceCodeEditor").removeClass("disabled"),g("#menuConnect").parent().addClass("disabled"),pe(T);break;case a.gui.connectionType.AGENTORTOKEN:l.listRobotStart(),1==a.gui.isAgent?fe():g("#menuConnect").parent().removeClass("disabled"),g("#runSourceCodeEditor").addClass("disabled"),pe(w);break;case a.gui.connectionType.TDM:c.init(),pe(w);break;case a.gui.connectionType.WEBVIEW:l.listRobotStop(),g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").removeClass("wait"),U(!1),g("#menuConnect").parent().removeClass("disabled"),ve()?g("#robotConnect").removeClass("disabled"):g("#robotConnect").addClass("disabled"),g("#runSourceCodeEditor").addClass("disabled"),pe(T);break;default:pe(w)}var b=!1;M(e)!=G()&&(b=!0),void 0===a.gui.firmwareDefault?g("#robotDefaultFirmware").addClass("hidden"):g("#robotDefaultFirmware").removeClass("hidden"),a.gui.robot=e,a.gui.robotGroup=i;var p=d.Msg.MENU_START_BRICK;p.indexOf("$")>=0&&(p=p.replace("$",I())),g("#menuRunProg").html(p),a.gui.blocklyWorkspace&&a.gui.blocklyWorkspace.robControls.refreshTooltips(I()),b&&(t.initView(),ve()&&(s.setRobotBehaviour(),s.jsToAppInterface({target:"internal",type:"setRobot",robot:i}))),a.gui.hasWlan?g("#robotWlan").removeClass("hidden"):g("#robotWlan").addClass("hidden"),a.gui.nn?(g("#nn-activations").empty(),g(".tabLinkNN").show(),g.each(a.gui.nnActivations,(function(e,o){g("#nn-activations").append(g("<option>",{value:o,text:r.activationDisplayName[o]}))}))):g(".tabLinkNN").hide(),!function(e){for(var o in ne())if(ne().hasOwnProperty(o)&&ne()[o].name==e&&1==ne()[o].stopButton)return!0;return!1}(e)?a.gui.blocklyWorkspace&&a.gui.blocklyWorkspace.robControls.hideStopProgram():a.gui.blocklyWorkspace&&a.gui.blocklyWorkspace.robControls.showStopProgram(),r.clearTabAlert("tabConfiguration")},o.resetRobot=function(){a.gui.robot=void 0},o.setKioskMode=function(e){a.kiosk=e},o.findGroup=M,o.findRobot=function(e){var o,r=ne();for(o in r)if(r[o].group===e)return r[o].name;return null},o.setConnectionState=function e(o){switch(o){case"busy":g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").removeClass("wait"),g("#head-navi-icon-robot").addClass("busy"),U(!1);break;case"error":g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").removeClass("wait"),g("#head-navi-icon-robot").addClass("error"),U(!1);break;case"wait":_()?(g("#head-navi-icon-robot").removeClass("busy"),g("#head-navi-icon-robot").removeClass("error"),g("#head-navi-icon-robot").addClass("wait"),U(!0)):e("error")}},o.isRunEnabled=function(){return a.gui.runEnabled},o.setRunEnabled=U,o.getRobot=B,o.getRobotGroup=G,o.setRobotPort=function(e){a.robot.robotPort=e},o.getRobotPort=V,o.getRobotRealName=I,o.getMenuRobotRealName=function(e){for(var o in ne())if(ne().hasOwnProperty(o)&&ne()[o].name==e)return ne()[o].realName;return"Robot not found"},o.isRobotBeta=function(e){return"beta"==ae()[e].announcement},o.isRobotDeprecated=F,o.getRobotDeprecatedData=function(e){if(F(e))return b.getDeprecatedNotifications(e,X())},o.getRobotInfoDE=function(e){for(var o in ne())if(ne().hasOwnProperty(o)&&ne()[o].name==e)return ne()[o].infoDE;return"#"},o.getRobotInfoEN=function(e){for(var o in ne())if(ne().hasOwnProperty(o)&&ne()[o].name==e)return ne()[o].infoEN;return"#"},o.isRobotConnected=_,o.isConfigurationUsed=K,o.isRobotDisconnected=function(){return a.robot.time=-1},o.getRobotTime=function(){return a.robot.time},o.getRobotName=function(){return a.robot.name},o.getRobotBattery=function(){return a.robot.battery},o.getRobotState=function(){return a.robot.state},o.getRobotVersion=function(){return a.robot.version},o.hasRobotDefaultFirmware=function(){return a.gui.firmwareDefault},o.setView=function(e){a.gui.view!==e&&(g("#head-navi-tooltip-program").attr("data-bs-toggle","dropdown"),g("#head-navi-tooltip-configuration").attr("data-bs-toggle","dropdown"),g("#head-navi-tooltip-robot").attr("data-bs-toggle","dropdown"),g("#head-navigation-program-edit").removeClass("disabled"),g(".robotType").removeClass("disabled"),g("#head-navigation-configuration-edit").removeClass("disabled"),a.gui.prevView=a.gui.view,a.gui.view=e,_()||(U(!1),g("#runSourceCodeEditor").addClass("disabled")),g(".rightMenuButton.rightActive").length>0&&g(".rightMenuButton.rightActive").clickWrap(),"tabConfiguration"===e?(g("#head-navigation-program-edit").css("display","none"),g("#head-navigation-configuration-edit").css("display","inline"),g("#menuTabProgram").parent().removeClass("disabled"),g("#menuTabNN").parent().removeClass("disabled"),g("#menuTabNNLearn").parent().removeClass("disabled"),g("#menuTabConfiguration").parent().addClass("disabled"),r.clearTabAlert(e)):"tabProgram"===e?(g("#head-navigation-configuration-edit").css("display","none"),g("#head-navigation-program-edit").css("display","inline"),g("#menuTabConfiguration").parent().removeClass("disabled"),g("#menuTabNN").parent().removeClass("disabled"),g("#menuTabNNLearn").parent().removeClass("disabled"),g("#menuTabProgram").parent().addClass("disabled")):"tabNN"===e?(g("#head-navigation-configuration-edit").css("display","none"),g("#head-navigation-program-edit").css("display","inline"),g("#menuTabConfiguration").parent().removeClass("disabled"),g("#menuTabProgram").parent().removeClass("disabled"),g("#menuTabNN").parent().addClass("disabled"),g("#menuTabNNLearn").parent().removeClass("disabled")):"tabNNlearn"===e?(g("#head-navigation-configuration-edit").css("display","none"),g("#head-navigation-program-edit").css("display","inline"),g("#menuTabConfiguration").parent().removeClass("disabled"),g("#menuTabProgram").parent().removeClass("disabled"),g("#menuTabNN").parent().removeClass("disabled"),g("#menuTabNNLearn").parent().addClass("disabled")):"tabSourceCodeEditor"===e?(g("#head-navigation-configuration-edit").css("display","none"),g("#head-navigation-program-edit").css("display","inline"),g("#menuTabProgram").parent().removeClass("disabled"),g("#menuTabConfiguration").parent().removeClass("disabled"),g("#menuTabNN").parent().removeClass("disabled"),g("#menuTabNNLearn").parent().removeClass("disabled"),g("#head-navigation-program-edit").addClass("disabled"),g(".robotType").addClass("disabled"),g("#head-navi-tooltip-program").attr("data-bs-toggle",""),g("#head-navi-tooltip-configuration").attr("data-bs-toggle","")):(g("#head-navi-tooltip-program").attr("data-bs-toggle",""),g("#head-navi-tooltip-configuration").attr("data-bs-toggle",""),g("#head-navigation-program-edit").addClass("disabled"),g("#head-navigation-configuration-edit").addClass("disabled")))},o.getView=H,o.getPrevView=function(){return a.gui.prevView},o.setLanguage=function(e){if(g("#language li a[lang="+e+"]").parent().addClass("disabled"),g("#language li a[lang="+a.gui.language+"]").parent().removeClass("disabled"),"de"===e?(g(".EN").css("display","none"),g(".DE").css("display","inline"),g("li>a.DE").css("display","block")):(g(".DE").css("display","none"),g(".EN").css("display","inline"),g("li>a.EN").css("display","block")),a.gui.language=e,t.initView(),i.loadLegalTexts(),f.initValidationMessages(),b.reloadNotifications(),"tabStart"!==H()){p.reloadView(),v.reloadView(),(0,C.switchLanguage)(),(0,h.switchLanguage)(),(0,y.switchLanguage)(),(0,k.switchLanguage)(),(0,P.switchLanguage)(),(0,N.switchLanguage)(),NN_C.reloadViews();var o=d.Msg.MENU_START_BRICK;o.indexOf("$")>=0&&(o=o.replace("$",I())),g("#menuRunProg").text(o),O()&&O().robControls.refreshTooltips(I()),g("#infoContent").attr("data-placeholder",d.Msg.INFO_DOCUMENTATION_HINT||"Document your program here ..."),g(".bootstrap-tagsinput input").attr("placeholder",d.Msg.INFO_TAGS||"Tags"),Ce()}},o.getLanguage=X,o.isProgramSaved=function(){return a.program.saved},o.setProgramSaved=j,o.isConfigurationSaved=function(){return a.configuration.saved},o.setConfigurationSaved=z,o.getProgramShared=function(){return a.program.shared},o.setProgramSource=function(e){a.program.source=e},o.getProgramSource=function(){return a.program.source},o.getSourceCodeFileExtension=function(){return a.gui.sourceCodeFileExtension},o.getBinaryFileExtension=function(){return a.gui.binaryFileExtension},o.isUserLoggedIn=J,o.getProgramTimestamp=function(){return a.program.timestamp},o.setProgramTimestamp=function(e){a.program.timestamp=e},o.getProgramName=function(){return a.program.name},o.setProgramName=$,o.getProgramOwnerName=Y,o.setProgramOwnerName=q,o.getProgramAuthorName=Q,o.setProgramAuthorName=Z,o.getProgramShareRelation=ee,o.setProgramShareRelation=oe,o.getConfigurationName=function(){return a.configuration.name},o.setConfigurationName=re,o.setConfigurationNameDefault=function(){re(W())},o.setProgramToolboxLevel=function(e){g(".level").removeClass("disabled"),g(".level."+e).addClass("disabled"),a.program.toolbox.level=e},o.getProgramToolboxLevel=function(){return a.program.toolbox.level},o.getToolbox=function(e){return a.gui.program.toolbox[e]},o.getConfToolbox=function(){return a.conf.toolbox},o.getRobotFWName=function(){return a.robot.fWName},o.setRobotToken=function(e){a.robot.token=e},o.setConfigurationXML=function(e){a.configuration.xml=e},o.getConfigurationXML=function(){return a.configuration.xml},o.setProgramXML=function(e){a.program.xml=e},o.getProgramXML=function(){return a.program.xml},o.getRobots=ne,o.getProgramToolbox=function(){return a.gui.program.dynamicToolbox?a.gui.program.dynamicToolbox:a.gui.program.toolbox[a.program.toolbox.level]},o.setDynamicProgramToolbox=function(e){a.gui.program.dynamicToolbox=e},o.resetDynamicProgramToolbox=function(){delete a.gui.program.dynamicToolbox},o.getConfigurationToolbox=function(){return a.gui.configuration.toolbox},o.getProgramProg=function(){return a.gui.program.prog},o.getConfigurationConf=function(){return a.gui.configuration.conf},o.getStartWithoutPopup=function(){return a.gui.startWithoutPopup},o.setStartWithoutPopup=function(){return a.gui.startWithoutPopup=!0},o.getServerVersion=function(){return a.server.version},o.isPublicServerVersion=function(){return a.server.isPublic},o.getUserName=function(){return a.user.name},o.getUserAccountName=te,o.isUserAccountActivated=function(){return a.user.isAccountActivated},o.isUserMemberOfUserGroup=ie,o.getUserUserGroup=function(){return a.user.userGroup},o.getUserUserGroupOwner=function(){return a.user.userGroupOwner},o.setLogin=function(e){A(e),a.user.accountName=e.userAccountName,void 0===e.userName||""===e.userName?a.user.name=e.userAccountName:a.user.name=e.userName,a.user.id=e.userId,a.user.isAccountActivated=e.isAccountActivated,a.user.userGroup=e.userGroupName,a.user.userGroupOwner=e.userGroupOwner,g(".navbar-nav > li > ul > .login, .logout").removeClass("disabled"),g(".navbar-nav > li > ul > .login.unavailable").addClass("disabled"),g(".navbar-nav > li > ul > .logout").addClass("disabled"),g("#head-navi-icon-user").removeClass("error"),g("#head-navi-icon-user").addClass("ok"),g(".menuLogin").addClass("pe-none"),g("#menuSaveProg").parent().addClass("disabled"),g("#menuSaveConfig").parent().addClass("disabled"),B()&&(j(!0),z(!0),"tabGalleryList"==a.gui.view&&g("#galleryList").find('button[name="refresh"]').clickWrap()),ie()&&(g("#registerUserName, #registerUserEmail").prop("disabled",!0),g("#userGroupMemberDefaultPasswordHint").removeClass("hidden"))},o.setLogout=function(){ie()&&(g("#registerUserName, #registerUserEmail").prop("disabled",!1),g("#userGroupMemberDefaultPasswordHint").addClass("hidden")),a.user.id=-1,a.user.accountName="",a.user.name="",a.user.userGroup="",a.user.userGroupOwner="","tabUserGroupList"===H()&&g("#tabProgram").tabWrapShow(),$("NEPOprog"),q(null),Z(null),oe(null),a.program.shared=!1,g(".navbar-nav > li > ul > .logout, .login").removeClass("disabled"),g(".navbar-nav > li > ul > .login").addClass("disabled"),g("#head-navi-icon-user").removeClass("ok"),g("#head-navi-icon-user").addClass("error"),"tabProgList"==a.gui.view?g("#tabProgram").tabWrapShow():"tabConfList"==a.gui.view?g("#tabConfiguration").clickWrap():"tabGalleryList"==a.gui.view&&g("#galleryList").find('button[name="refresh"]').clickWrap(),g(".menuLogin").removeClass("pe-none")},o.setProgram=function(e,o,r){if(e){a.program.shared=e.programShared,a.program.timestamp=e.lastChanged,j(!0),z(!0);e.name;oe(e.programShared),o?q(o):e.parameters&&e.parameters.OWNER_NAME?q(e.parameters.OWNER_NAME):q(null),r?Z(r):e.parameters&&e.parameters.AUTHOR_NAME?Z(e.parameters.AUTHOR_NAME):q(null),$(e.name)}},o.setConfiguration=function(e){e&&(re(e.name),a.configuration.timestamp=e.lastChanged,z(!0),j(!1),g("#tabConfigurationName").html(e.name))},o.checkSim=se,o.hasSim=ue,o.hasMultiSim=le,o.hasMarkerSim=ge,o.hasNN=function(){return 1==a.gui.nn},o.hasWebotsSim=de,o.getWebotsUrl=function(){return a.gui.webotsUrl},o.getListOfTutorials=ce,o.getConnectionTypeEnum=be,o.getConnection=me,o.getVendor=function(){return a.gui.vendor},o.getSignature=function(){return a.gui.signature},o.getCommandLine=function(){return a.gui.commandLine},o.setProgramToDownload=function(){return a.gui.program.download=!0},o.isProgramToDownload=function(){return a.gui.program.download},o.setPing=function(e){a.server.ping=e},o.doPing=function(){return a.server.ping},o.setPingTime=pe,o.getPingTime=function(){return a.server.pingTime},o.setSocket=function(e){a.robot.socket=e},o.getSocket=function(){return a.robot.socket},o.getAvailableHelp=function(){return a.server.help},o.getTheme=function(){return a.server.theme},o.inWebview=ve,o.setWebview=function(e){a.gui.webview=e},o.updateMenuStatus=fe,o.updateTutorialMenu=Ce,o.getLegalTextsMap=function(){return a.server.legalTexts}}));
//# sourceMappingURL=guiState.controller.js.map
//# sourceMappingURL=guiState.controller.js.map
