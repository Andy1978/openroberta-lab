define(["require","exports","message","util.roberta","guiState.controller","program.controller","program.model","blockly","codeflask","jquery"],(function(o,e,a,r,n,t,i,s,c,g){Object.defineProperty(e,"__esModule",{value:!0}),e.setCodeLanguage=e.setCode=e.init=void 0;var u,d,l=.5;e.init=function(){u=n.getBlocklyWorkspace(),d=new c("#codeContent",{language:"java",lineNumbers:!0,readonly:!0}),g("#codeButton").off("click touchend"),g("#codeButton").onWrap("click touchend",(function(o){return function(o){if(g("#codeButton").hasClass("rightActive"))g("#blocklyDiv").closeRightView();else{var e=s.Xml.workspaceToDom(u),r=s.Xml.domToText(e),c=n.isConfigurationStandard()||n.isConfigurationAnonymous()?void 0:n.getConfigurationName(),m=n.isConfigurationAnonymous()?n.getConfigurationXML():void 0,f=n.getLanguage();i.showSourceProgram(n.getProgramName(),c,r,m,t.SSID,t.password,f,(function(e){t.reloadProgram(e),"ok"==e.rc?(n.setState(e),d.updateCode(e.sourceCode),n.setProgramSource(e.sourceCode),o.openRightView(g("#codeDiv"),l)):a.displayInformation(e,e.message,e.message,e.parameters)}))}}(g(this)),!1})),g("#codeDownload").onWrap("click",(function(o){var e=n.getProgramName()+"."+n.getSourceCodeFileExtension();r.download(e,n.getProgramSource()),a.displayMessage("MENU_MESSAGE_DOWNLOAD","TOAST",e)}),"codeDownload clicked"),g("#codeRefresh").onWrap("click",(function(o){o.stopPropagation();var e=s.Xml.workspaceToDom(u),r=s.Xml.domToText(e),c=(n.getConfigurationXML(),n.isConfigurationStandard()||n.isConfigurationAnonymous()?void 0:n.getConfigurationName()),g=n.isConfigurationAnonymous()?n.getConfigurationXML():void 0,l=n.getLanguage();i.showSourceProgram(n.getProgramName(),c,r,g,t.SSID,t.password,l,(function(o){t.reloadProgram(o,!0),"ok"==o.rc?(n.setState(o),d.updateCode(o.sourceCode),n.setProgramSource(o.sourceCode)):a.displayInformation(o,o.message,o.message,o.parameters)}))}),"code refresh clicked")},e.setCode=function(o){d.updateCode(o)},e.setCodeLanguage=function(o){var e;switch(o){case"py":e="python";break;case"java":e="java";break;case"ino":case"nxc":case"cpp":e="clike";break;default:e="js"}d.updateLanguage(e)}}));
//# sourceMappingURL=progCode.controller.js.map
//# sourceMappingURL=progCode.controller.js.map
